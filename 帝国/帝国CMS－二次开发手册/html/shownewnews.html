<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>《帝国网站管理系统》教程</title>
<link href="../images/css.css" rel="stylesheet" type="text/css">
</head>

<body leftmargin="0" topmargin="0">
<table width="100%" border="0" align="center" bgcolor="#C3EFFF">
  <tr> 
    <td width="50%" height="27"><strong><img src="../images/noadd.gif" width="15" height="15">开发范例：显示最新10条新闻</strong></td>
    <td width="50%"><div align="center"> </div></td>
  </tr>
</table>
<br>
<table width="98%" border="0" align="center">
  <tr id="EmpireCMSPath"> 
    <td width="100%" height="25" bgcolor="#4FB4DE"><strong><font color="#FFFFFF">显示最新10条新闻程序编写例子</font></strong></td>
  </tr>
  <tr>
    <td height="25" bgcolor="#C3EFFF"><strong>程序代码编写</strong></td>
  </tr>
  <tr> 
    <td height="25"><strong>存放目录格式：</strong></td>
  </tr>
  <tr> 
    <td height="25"><table border=0 width=100% cellspacing=1 cellpadding=10 bgcolor='#cccccc' class='incthreadtext'>
        <tr> 
          <td width='100%' bgcolor='#FFFFFF' style='word-break:break-all'> <table width="400" border="0" cellspacing="1" cellpadding="3">
              <tr> 
                <td width="169">插件程序存放目录用：</td>
                <td width="216">/e/extend/newnews/</td>
              </tr>
              <tr> 
                <td>插件程序模板存放目录用：</td>
                <td>/e/extend/newnews/template/ </td>
              </tr>
            </table></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td height="25"><b>所需程序文件：</b></td>
  </tr>
  <tr> 
    <td height="25"><table border=0 width=100% cellspacing=1 cellpadding=10 bgcolor='#cccccc' class='incthreadtext'>
        <tr> 
          <td width='100%' bgcolor='#FFFFFF' style='word-break:break-all'> <table width="500" border="0" cellspacing="1" cellpadding="3">
              <tr> 
                <td width="285"><font color="#0000FF">/e/extend/newnews/index.php</font></td>
                <td width="100">主程序文件</td>
              </tr>
              <tr> 
                <td><font color="#0000FF">/e/extend/newnews/template/index.temp.php</font></td>
                <td>主程序模板文件</td>
              </tr>
            </table>
            <br> <table width="600" border="0" cellspacing="1" cellpadding="3">
              <tr bgcolor="#C3EFFF"> 
                <td height="25">程序目录</td>
                <td bgcolor="#C3EFFF">模板目录</td>
              </tr>
              <tr> 
                <td width="50%" valign="top"><img src="img/shownewnews1.jpg" width="225" height="111"></td>
                <td valign="top"><img src="img/shownewnews2.jpg" width="215" height="126"></td>
              </tr>
            </table></td>
        </tr>
      </table></td>
  </tr>
  <tr> 
    <td height="25">&nbsp;</td>
  </tr>
  <tr> 
    <td height="25">&nbsp;</td>
  </tr>
  <tr> 
    <td height="25"> <b>主程序文件内容</b>(<font color="#0000FF">/e/extend/newnews/index.php</font>)：<br> 
      <table border=0 width=100% cellspacing=1 cellpadding=10 bgcolor='#cccccc' class='incthreadtext'>
        <tr> 
          <td width='100%' bgcolor='#FFFFFF' style='word-break:break-all'>&lt;?php<br>
            require('../../class/connect.php'); //引入数据库配置文件和公共函数文件<br>
            require('../../class/db_sql.php'); //引入数据库操作文件<br>
            require('../../data/dbcache/class.php'); //引入栏目缓存文件<br>
            $link=db_connect(); //连接MYSQL<br>
            $empire=new mysqlquery(); //声明数据库操作类<br>
            $editor=1; //声明目录层次
            <p><font color="#FF0000">$sql=$empire-&gt;query(&quot;select * from 
              {$dbtbpre}ecms_news order by newstime limit 10&quot;); //查询新闻表最新10条记录<br>
              require('template/index.temp.php'); //导入模板文件</font></p>
            <p>db_close(); //关闭MYSQL链接<br>
              $empire=null; //注消操作类变量<br>
              ?&gt;</p>
            </td>
        </tr>
      </table>
      <br> </td>
  </tr>
  <tr> 
    <td height="25"><b>主程序模板文件内容</b>(<font color="#0000FF">/e/extend/newnews/template/index.temp.php</font>)：<br> 
      <table border=0 width=100% cellspacing=1 cellpadding=10 bgcolor='#cccccc' class='incthreadtext'>
        <tr> 
          <td width='100%' bgcolor='#FFFFFF' style='word-break:break-all'><font color="#0000FF">&lt;?php<br>
            if(!defined('InEmpireCMS'))<br>
            {<br>
            &nbsp; &nbsp; &nbsp; &nbsp; exit();<br>
            }<br>
            ?&gt;</font><br>
            &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=gb2312&quot;&gt;<br>&lt;title&gt;显示最新10条新闻例子&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;br&gt;<br>&lt;br&gt;<br>&lt;br&gt;<br>&lt;table width=&quot;500&quot; border=&quot;0&quot; align=&quot;center&quot; cellpadding=&quot;3&quot; cellspacing=&quot;1&quot; bgcolor=&quot;#CCCCCC&quot;&gt;<br>&nbsp;&nbsp;&lt;tr&gt; <br>&nbsp; &nbsp; &lt;td height=&quot;25&quot;&gt;&lt;strong&gt;显示最新10条新闻：&lt;/strong&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&lt;tr&gt; <br>&nbsp; &nbsp; &lt;td height=&quot;25&quot; bgcolor=&quot;#FFFFFF&quot;&gt;<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <font color="#FF0000">&lt;table 
            width=&quot;100%&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; 
            cellpadding=&quot;0&quot;&gt;<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;?php<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while($r=$empire-&gt;fetch($sql))&nbsp; 
            &nbsp; &nbsp; &nbsp; //循环获取查询记录<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
            &nbsp; &nbsp; $titleurl=sys_ReturnBqTitleLink($r);&nbsp; &nbsp; &nbsp; 
            &nbsp; //标题链接<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ?&gt;<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;tr&gt;<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=&quot;67%&quot; 
            height=&quot;25&quot;&gt;・&lt;a href=&quot;&lt;?=$titleurl?&gt;&quot; 
            target=&quot;_blank&quot;&gt; <br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;?=esub(stripslashes($r[title]),32)?&gt;<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt;&lt;/td&gt;<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td width=&quot;33%&quot;&gt;&lt;div 
            align=&quot;center&quot;&gt;[&lt;?=date('Y-m-d',$r[newstime])?&gt;]&lt;/div&gt;&lt;/td&gt;<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/tr&gt;<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;?php<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ?&gt;<br>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/table&gt;</font><br>
            &nbsp; &nbsp; &lt;/td&gt;<br>&nbsp;&nbsp;&lt;/tr&gt;<br>&lt;/table&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;
</td>
        </tr>
      </table>
      <strong>说明：模板可用Dreamweaver可视化制作。其中蓝色部分代码为不允许直接访问模板文件的作用。</strong></td>
  </tr>
  <tr> 
    <td height="25">&nbsp;</td>
  </tr>
  <tr> 
    <td height="25" bgcolor="#C3EFFF"><strong>访问Hello World插件文件主程序：/e/extend/newnews/index.php</strong></td>
  </tr>
  <tr> 
    <td height="25"><img src="img/shownewnews3.jpg" width="642" height="406" border="1"></td>
  </tr>
</table>
<br>
<br>
<br>
<br>
</body>
</html>